\section{Kommunikationsenhet}
Kommunikationsenheten är robotens gränssnitt för interaktion med omvärlden och har två uppgifter. Den ska
\begin{itemize}
\item agera som ett gränssnitt mot LCD-displayen och möjliggöra att alla delsystem kan skriva ut information på den.
\item hantera den seriella kommunikationen över Bluetooth och möjliggöra att roboten kan skicka och ta emot information till och från PC-gränssnittet.
\end{itemize}

Figur \ref{fig:kommblock} ger en övergripande bild över kommunikationsenhetens beståndsdelar.

\nyBild{Block-komm.png}{Blockschema över kommunikationsenheten.}{kommblock}{0.7}

\subsection{LCD-gränssnitt}
LCD-displayen som är monterad på kommunikationsenheten är av modellen JM162A. Den styrs genom en parallell databuss och ett antal styrsignaler från kommunikationsenhetens processor till en intern processor i LCD-enheten. Skärmen har två rader med 16 tecken vardera.



\subsection{Seriell kommunikation över Bluetooth}
Anslutningen till datorn sker med bluetoothmodemet \emph{BlueSMiRF Gold} som är monterat på roboten. På PC-sidan skapas vid parkoppling med modemet en virtuell serieport, som emulerar en fysisk COM-port eller motsvarande. Kommunikationen sker sedan över denna port som om den vore en vanlig RS-232-port. 

På robotsidan används AVR-processorns inbyggda modul för USART, och det gemensamma biblioteket för USART som används av flera delsystem -- se avsnitt \ref{sec:usart}. Följande parametrar ställs in i det protokoll som roboten använder:
\begin{itemize}
\item Datahastigheten är 115 200 bps.
\item Data skickas som 8-bitars värden utan någon paritetsbit.
\item Ingen flödeshantering eller handskakning används.
\item Varje värde om 8 bitar avslutas med en stoppbit.
\end{itemize}

Hur olika typer av information överförs mellan robot och PC beskrivs närmare i avsnitt \ref{sec:bt-protokoll}.

\documentclass[a4paper,12pt]{article}
\usepackage{graphicx}

\usepackage{epstopdf}
\usepackage{gensymb}
\usepackage{float}
\usepackage{mathtools}
\usepackage{setspace}
\usepackage{tabularx}
\title{Fördjupningsuppgift i kommunikation och konstruktion}
\input{LIPS.tex}


\usepackage{sectsty}
\allsectionsfont{\sffamily}

\frenchspacing

\renewcommand{\thepage}{\roman{page}}

\newcommand{\LIPSartaltermin}{VT14}
\newcommand{\LIPSkursnamn}{TSEA56 Elektronik kandidatprojekt}

\newcommand{\LIPSprojekttitel}{Lagerrobot}

\newcommand{\LIPSprojektgrupp}{Grupp 1}
\newcommand{\LIPSgruppepost}{tsea56-2014-grupp-1@googlegroups.com}
\newcommand{\LIPSdokumentansvarig}{LIPS Designspecifikation}

\newcommand{\LIPSkund}{ISY, Linköpings universitet, 581\,83 Linköping}
\newcommand{\LIPSkundkontakt}{Tomas Svensson, 013-28 13 68, tomass@isy.liu.se}
\newcommand{\LIPSkursansvarig}{Tomas Svensson, 013-28 13 68, 3B:528, tomass@isy.liu.se}
\newcommand{\LIPShandledare}{Anders Nilsson, 3B:512, 013-28 26 35, anders.p.nilsson@liu.se}


\newcommand{\LIPSdokumenttyp}{Fördjupningsuppgift \\ i \\ kommunikation och konstruktion}
\newcommand{\LIPSredaktor}{Karl Linderhed, Patrik Nyberg och Erik Nybom}
\newcommand{\LIPSversion}{0.1}
\newcommand{\LIPSdatum}{\dagensdatum}

\newcommand{\LIPSgranskare}{}
\newcommand{\LIPSgranskatdatum}{}
\newcommand{\LIPSgodkannare}{}
\newcommand{\LIPSgodkantdatum}{}

\begin{document}

\LIPStitelsida

%% Argument till \LIPSgruppmedlem: namn, roll i gruppen, telefonnummer, epost
\begin{LIPSprojektidentitet}
  \LIPSgruppmedlem{Karl Linderhed}{Projektledare (PL)}{073-679 59 59}{karli315@student.liu.se}
  \LIPSgruppmedlem{Patrik Nyberg}{Dokumentansvarig (DOK)}{073 -049 59 90}{patny205@student.liu.se}
  \LIPSgruppmedlem{Johan Lind}{}{070-897 58 24}{johli887@student.liu.se}
  \LIPSgruppmedlem{Erik Nybom}{}{070-022 47 85}{eriny778@student.liu.se}
  \LIPSgruppmedlem{Andreas Runfalk}{}{070-564 23 79}{andru411@student.liu.se}
  \LIPSgruppmedlem{Philip Nilsson}{}{073-528 48 86}{phini326@student.liu.se}
  \LIPSgruppmedlem{Lucas Nilsson}{}{073-059 42 94}{lucni395@student.liu.se}
\end{LIPSprojektidentitet}


\renewcommand*\contentsname{Innehåll}
\begin{spacing}{0.5}
\tableofcontents{}
\end{spacing}
\newpage

%% Argument till \LIPSversionsinfo: versionsnummer, datum, ändringar, utfört av, granskat av
%\addcontentsline{toc}{section}{Dokumenthistorik}
\begin{LIPSdokumenthistorik}
  \LIPSversionsinfo{0.1}{2014-03-25}{Första utkast för stilgranskning}{KL}{}
  %\LIPSversionsinfo{1.0}{2014-03-18}{Ändringar efter handledares granskning.}{KL}{-}
\end{LIPSdokumenthistorik}
\newpage

\renewcommand{\thepage}{\arabic{page}}
\setcounter{page}{1}

\section{Inledning}
Denna skrivuppgift tjänar till att fördjupa projektgruppens kunskaper i några områden som är relevanta för projektet. I detta dokument behandlas batterier och servon.

\section{Problemformulering}
Följande frågeställningar ska besvaras i denna uppgift:
\begin{itemize}
\item Hur fungerar litiumjonbatterier?

\item Vilka risker finns vid användning och laddning av litiumjonbatterier?

\item Hur påverkas livstiden hos ett batteri av användning och laddningsmönster?

\item Vilken forskning bedrivs om batterier i nuläget?

\item Hur fungerar ett enkelt servo?

\item Hur kan man få ett servo att röra sig utan kraftiga ryck?
\end{itemize}
\section{Kunskapsbas}
För att samla och inhämta information har gruppen använt sig av vetenskapliga publikationer och litteratur som behandlar ämnena. Detta avsnitt sammanfattar den information som har insamlats.

\subsection{Litiumjonbatterier}
Litium-jon-batterier utnyttjar det faktum att litium är ett av de mest elektronegativa ämnena som finns, och när en elektron lämnar en litiumatom frigörs en stor mängd energi. Detta gör att batterier som använder litiums jonövergång kan få väldigt hög energidensitet och prestanda.

Som i alla batterier används två elektriskt isolerade elektroder, omslutna av en elektrolyt som sammankopplar dem kemiskt. Elektrolyten och materialen i elektroderna möjliggör att kemiska jämviktsreaktioner kan äga rum, och vilken riktning reaktionerna går i avgörs av om det finns en extern potentialskillnad mellan elektroderna eller om de är kortslutna, exempelvis genom någon last, se figur \ref{fig:reaction}. \cite{glaize13}

\nyBild{Reaktionsforlopp.png}{Flöde av ström och joner vid laddning och urladdning}{reaction}{0.8}

\subsubsection{Laddning}
För laddning av batterier finns det två olika tekniker. En är att hålla en konstant ström till batteriet och den andra att hålla en konstant spänning till batteriet. Eftersom litiumjonbatterier är mycket känsliga mot för hög spänning är det vanligt att en kombination av de båda används.

Då hålls först en konstant ström, sedan när batteriet når 4,2V per cell hålls istället en konstant spänning. Då mäts strömmen till batteriet och när det når några procent av ursprungliga värdet så anses batteriet vara fullt laddat. Exakt siffra på hur många procent av strömmen batteriet laddas till beror på tillverkare, typiskt är runt 2-5\%.

\subsubsection{Livstid}
Livstid hos batterier mäts främst i antalet cykler de klarar av innan de når 80\% av sin ursprungliga kapacitet. En cykel består utav en full laddning och urladdning, detta kan dock ske under flera separata laddningstillfällen. Det sker alltså ingen nämnvärd skillnad i livslängd om ett batteri laddas ofta eller sällan. Detta så länge ett batteri inte lagras mer än 6 månader utan användning.

Vid lagring av batterier kan de över lång tid tappa kapacitet, hur mycket beror på vilken laddning de har. Vid full laddning finns det risk att batteriet tappar mer maximal kapacitet än vid ej full laddning. Eftersom det laddas ur under lagring så kan det vid lagring med nästan tom laddning göra att batteriet går under 2,7V per cell. Om detta sker går batteriet in ett ''djupt urladdningstillstånd'' och kommer då inte gå att ladda igen. För ett exempel så rekommenderar Apple att om deras produkter ska förvaras längre tid utan användning ska detta ske vid cirka 50\% laddning. \cite{apple}

Slitage på litiumjonbatterier beror på många olika faktorer. Bland annat spelar temperatur på batteriet roll. Höga temperaturer gör att slitage på batteriet kommer ske med ökande hastighet, men även låga temperaturer påverkar batteriets livslängd negativt. Låga temperaturer har visats ha störst negativ effekt vid uppladdning av batteriet. \cite{ageing}

Laddning av batterier är ett av de moment som sliter på batterier signifikant. En av de effekter som påverkar livstiden mest \cite{charging} och som ger upphov till permanenta skador på batteriet är så kallad “Lithium plating”. Detta sker då det blir en litiummetallbeläggning på anoden.\cite{nasa} Detta är en icke reversibel process och betyder då att batteriet permanent förlora kapacitet. För att minimera denna effekt ska laddning inte ske vid låga temperaturer och med låg ström under de första samt sista 10\% av laddningen. \cite{charging-p}

Intressant att notera är att den typen av laddningsteknik som används i laddare för hemelektronik idag inte gör på detta sätt.\cite{apple} De laddar istället med konstant ström från början tills dess att 4,7V finns i varje cell och byter därefter till konstant spänning. Detta görs troligen eftersom dagens batteri trots detta har en livstid på ungefär 1 000 cykler, och tillverkarna har då prioriterat snabbhet över livstid.

\subsubsection{Säkerhet}
Li-ion batterier kan av många olika anledningar gå sönder. De vanligaste är felaktigheter i produktion eller att användaren på något sätt utsätter batteriet för för stora påfrestningar. Dessa påfrestningar kan vara för hög eller låg temperatur, överladdning, brand, kortslutning eller mekaniska påfrestningar så som tryck. \cite{lihazard}

När ett Li-ion batteri går sönder finns det stor risk att det expanderar, blir varmt och i vissa fall även börjar brinna eller till och med exploderar.

Li-ion batterier kan, av slitage genom litihum plating, internt kortslutas.\cite{nasa} Då detta händer finns det risk för att batteriet blir mycket varmt, expanderar, börjar brinna eller exploderar. 

Då ett batteri utsätts för öppen låga har forskning gjord av FAA \cite{fire-faa} visat att batterier från olika tillverkare beter sig i stort sätt likadant. Deras experiment visar att de först ventilerar en del av elektrolyten i batteriet. Denna vätska antänds sedan och bildar då en egen brandhärd. Vidare säger de att ''Occasionally, the pressure release ports failed to operate correctly, causing buildup of pressure inside the cell case until the casing failed. When this occurred, the cell literally exploded …''

Dessa experiment utförda av FAA visade också hur snabbt brandförloppet är. Efter 45 sekunder började batterierna att ventilera elektrolyt och 65 sekunder in antändes även vätskan. I denna studie fastslogs även att lågan som li-ion batterier ger upphov till är tillräckligt varm för att antända annat vanligt packmaterial som ofta finns i lastrum.\cite{fire-faa}

På grund utav detta är batterier av li-ion typ klassade som farligt gods då de transporteras i större mängd. Det finns också ytterligare risk då de transporteras via flygplan. Detta då en brand i li-ion batterier kan göra att trycket ökar. Detta gör i sådant fall att med så få som 4 battericeller kan trycket i lastrummet öka så mycket att lastrummet måste öppna ventiler för att hålla tryckskillnad inom säkra nivåer. Detta kommer i sin tur att göra det svårare för det automatiska brandförsvarssystem som finns installerat.\cite{fire-faa}

Ett uppmärksammat fall med li-ion batterier och säkerhet är Boeings plan 787 “Dreamliner”. Där fanns det ett problem med li-ion batterier i cockpit som orsakade rökutveckling under flera flygningar. I detta fall har man inte kunnat identifierat problemet som gör att batterierna började brinna. Detta trots stora tester och 25 000 timmars tester av batterierna innan lansering av planet. Problemet löstes sedemera genom en ny batteridesign samt en brandsäker annordning som också kunde avvärja rök från cockpit.\cite{dreamliner}

\subsection{Servon}
Servon används framförallt i robotar och automatiserade system. De är väl lämpade för när man kräver en motor som kan vara stilla och ändå hålla kvar sin last utan att bli överhettade. 

Ett servo består av tre delar: en servomotor som kan vara antingen en AC-motor eller den DC-motor, en positionssensor som mäter servomotorns position samt en kontrollenhet som styr motorn. Kontrollenheten jämför konstant felet mellan det önskade vinkelutslaget och den vinkel positionssensor mäter upp och styr sedan servomotorn för att minimera detta fel. Detta kallas att systemet är återkopplat. Den stora fördelen med ett servo är just att den är återkopplad då återkopplningen gör att servot kan hantera olika tunga laster och yttre påverkningar utan att ställa sig fel, vilket lätt händer med öppna system. 

Servots styrsignal brukar vara elektrisk pulsbredd som skickas till den med jämna mellanrum. Detta kallas för att den styrs med PWM (Pulse width modulation). Pulsbredden skickas vanligen från en mikrokontroller eller en mikroprocessor och omvandlas av servot till ett vinkelutslag som den sedan ställer in sig på. Vinkelomfånget för ett servo är oftast 180 grader. 

På enklare PWM-styrda servomotorer är det omöjligt att kontrollera acceleration och deacceleration vid rörelser om man inte styr strömmen som går till servomotorn. Det är däremot vanligt att en servomotor har inbyggd så kallad PID-regulator, vilket gör så att motorn går snabbt när det är långt till den önskade positionen och saktar ner ju närmare målet den kommer, så att det inte blir ett tvärstopp eller vrålstart. Tvärstopp och vrålstarter vill man undvika eftersom det blir hackigt och det kan bli för stora belastningar på systemet. 



\subsubsection{Hur styr man ett servo?}

Servomotorer styrs som ovan nämnt genom återkoppling, där det önskade värdet jämförs med det riktiga värdet. Skillnaden mellan dessa värden förstärks, omvandlas och används för att driva motorn i den rikting så att felet minskas. Den önskade vinkeln anges med så kallad PWM och innebär att man skickar en elektrisk puls vars varaktighet bestämmer läget på motorn. Denna puls upprepas med en given frekvens. Ifall man slutar skicka en puls kommer servot att stå kvar i den position den är i, så länge den inte rubbas av en utomstående kraft. Oftast vill man inte att servot ska kunna rubbas och därför fortsätter man att skicka samma puls tills dess att man vill att servots position ska ändras. 

Hos en del servon kan man ändra på parametrarna för hur den ska fungera. Man kan då ställa in hur flera max-värden som t.ex. hur varm den får bli, hur snabbt den får gå, vilket vridmoment den får ha och hur hårt den ska bromsa in innan den når det önskade värdet. Dessa servon är dock inte PWM-styrda utan styrs seriellt genom att man skickar meddelanden som ändrar en parameter hos servot till ett visst värde. 

Om man vill styra flera servon samtidigt, till exempel ifall man vill styra en robotarm med flera rörliga leder, har man stor fördel av att använda de lite mer avancerade servon som kommunicerar seriellt med half duplex. Dessa servon kan nämligen parallellkopplas och styrs individuellt genom att varje servo tilldelas ett unikt identifikationsnummer. När man vill styra ett servo skickar man ett meddelande till alla servon men endast det servo vars ID stämmer överens med ID:t angivet i meddelandet svarar. Man kan även skicka ett meddelande till flera ID:n samtidigt och dessutom med olika värden till vart och ett av servona. 

Dessa servon kan man dessutom programmera och ändra på många parametrar för att ändra till exempel hastighet, max vridmoment, inbromsning, max temperatur, begränsa vinkelomfånget och så vidare.



\section{Fördjupning}

\subsection{Dynamixel AX-12A}

Dynamixel AX-12A är de servon som används i robotarmarna på ISY. Dynamixel AX-12A servona styrs med UART från en mikroprocessor. Signalen måste dock omvandlas till halvduplex innan den når servona. Detta innebär att man behöver använda en extern krets så att det finns en direction port, en transmit port samt en recieve port kopplade till mikroprocessorn. Kretsen omvandlar sedan så att endast en signal går till servona, detta görs för att Dynamixel AX-12A även har en inbyggd funktion att kunna svara på meddelanden den tar emot. Vilken av transmit port och recieve port som är aktiv väljs genom att sätta direction port till antingen 1 eller 0. Halvduplex medför alltså att endast en enhet får skicka data i taget. \cite{dyn-manual}

Kommunikation sker med två olika typer av datapaket. De kallas instruktionspaket och statuspaket. Instruktionspaket skickas från mikroprocessorn till servot medan statuspaket skickas från servo till mikroprocessor. Instruktionspaketet skickas från transmit porten på mikroprocessorn samtidigt som direction port är satt i ''sändläge'', i detta fall en etta. När servot tar emot ett meddelande svarar denna med ett statuspaket som tas emot av mikroprocessorn på recieveporten samtidigt som direction port är i ''mottagningsläge'', i detta fall en nolla. Ett instruktionspaket måste se ut på ett visst sätt för att servot ska kunna tolka det. I grova drag ser instruktionspaketet ut så här:

[Startbytes] [ID] [Längd] [Instruktion] [Parametrar] [Kontrollsiffra]

Servot svarar sedan med ett statuspaket som ser ut enligt:

[Startbytes] [ID] [Längd] [Felkod] [Parametrar] [Kontrollsiffra]

Funktioner för att sätta upp portar och register i microprocessorn samt för att skicka och ta emot paket behöver implementeras i mikroprocessorn för att kunna använda servot. 

\section{Resultat och slutsatser}
Li-ion batterier kan anses vara säkra för vardaglig användning, även om de ska hanteras med försiktighet. De största farorna är under transport då många batterier fraktas samtidigt, då det vid en brand kan bli ett mycket våldsamt och snabbt brandförlopp då batteriena utsätts för öppen låga.

Detta är, som tidigare diskuterat, speciellt viktigt vid flygtransporter då batterierna också ger en tryckökning vilket gör det svårare för de automatiska släcksystem som finns installerade.

Ett alternativ till ett servo kan vara en så kallad stegmotor. Stegmotorn är även den PWM-styrd men vars rörelse är uppdelad i ett givet antal steg, och styrs genom att den hoppar ett visst antal steg för att ställa in sig på den önskade positionen. Den är betydligt enklare och billigare än en servomotor eftersom den är öppen, det vill säga att den helt saknar positionssensorn och återkopplingen. Stegmotorn kan ej ta hänsyn till ifall den skulle råka skippa ett steg eller ifall man skulle tvinga den till fel läge eller andra störningar och dess position blir därför inte lika pålitlig. Den saknar också möjligheten till mjuk acceleration och deceleration. Däremot är de ofta hållbara och enkla att använda.


\begin{thebibliography}{9}
\bibitem{glaize13} C. Glaize, S. Geniès, \emph{Lithium Batteries and other Electrochemical Storage Systems}\\ Wiley-ISTE, 2013

\bibitem{apple} Apple Inc, \emph{Apple Notebooks battery}
\\ http://www.apple.com/batteries/notebooks.html

\bibitem{ageing} J. Vetter, P. Novák, M.R. Wagner, K.-C. Möller, J.O. Besenhard, M. Winter, M. Wohlfahrt-Mehrens, C. Vogler, A. Hammouche, \emph{Ageing mechanisms in lithium-ion batteries}
\\ Journal of Power Sources, volym 147, utgåva 1-2, september 2005, sidor 269-281

\bibitem{charging} S.S. Zhang, K. Xu, T.R. Jow, \emph{Study of the charging process of a LiCoO$_{2}$-based Li-ion battery}
\\ Journal of Power Sources, volym 160, utgåva 2, oktober 2006, sidor 1349-1354

\bibitem{charging-p} S.S. Zhang, \emph{The effect of the charging protocol on the cycle life of a Li-ion battery}
\\ Journal of Power Sources, volym 161, utgåva 2, oktober 2006, sidor 1385-1391

\bibitem{fire-faa} H. Webster, \emph{Flammability Assessment of Bulk-Packed, Rechargeable Lithium-Ion Cells in Transport Category Aircraft}
\\DOT/FAA/AR-06/38, september 2006, Final Report

\bibitem{dreamliner} N. Williard, W. He, C. Hendricks, M. Pecht, \emph{Lessons Learned from the 787 Dreamliner Issue on Lithium-Ion Battery Reliability}
\\Energies, september 2013

\bibitem{lihazard} C. Mikolajczak, M. Kahn, K. White, R. Thomas, \emph{Lithium-Ion Batteries Hazard and Use Assessment}
\\Springer, 2011

\bibitem{nasa} A. Zimmerman, M. Quinzio, \emph{Lithium Plating in Lithium-Ion Cells}
\\The Aerospace Corporation, 2010
\\https://batteryworkshop.msfc.nasa.gov/presentations/1-Lithium\_Plating\_AZimmerman.pdf 

\bibitem{dyn-manual} \emph{User's Manual Dynamixel AX-12} \\ https://docs.isy.liu.se/twiki/pub/VanHeden/DataSheets/AX-12.pdf

\bibitem{ana-servo} Anaheim Automation, Inc, \emph{Servo motor guide}\\
 http://www.anaheimautomation.com/manuals/forms/servo-motor-guide.php

\end{thebibliography}
\end{document} 

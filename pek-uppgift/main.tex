\documentclass[a4paper,12pt]{article}
\usepackage[swedish]{babel}
\usepackage{graphicx}
\usepackage{epstopdf}
\usepackage{gensymb}
\usepackage{float}
\usepackage{mathtools}
\usepackage{setspace}
\usepackage{tabularx}
\usepackage{mhchem}

\title{Fördjupning i litium-jon-batterier respektive servomotorer}
\input{LIPS.tex}


\usepackage{sectsty}
\allsectionsfont{\sffamily}

\frenchspacing

\renewcommand{\thepage}{\roman{page}}

\newcommand{\LIPSartaltermin}{VT14}
\newcommand{\LIPSkursnamn}{TSEA56 Elektronik kandidatprojekt}

\newcommand{\LIPSprojekttitel}{Lagerrobot}

\newcommand{\LIPSprojektgrupp}{Grupp 1}
\newcommand{\LIPSgruppepost}{tsea56-2014-grupp-1@googlegroups.com}
\newcommand{\LIPSdokumentansvarig}{LIPS Designspecifikation}

\newcommand{\LIPSkund}{ISY, Linköpings universitet, 581\,83 Linköping}
\newcommand{\LIPSkundkontakt}{Tomas Svensson, 013-28 13 68, tomas.svensson@liu.se}
\newcommand{\LIPSkursansvarig}{Tomas Svensson, 013-28 13 68, 3B:528, tomas.svensson@liu.se}
\newcommand{\LIPShandledare}{Anders Nilsson, 3B:512, 013-28 26 35, anders.p.nilsson@liu.se}


\newcommand{\LIPSdokumenttyp}{Fördjupning i Litium-jon-batterier \\ respektive Servomotorer}
\newcommand{\LIPSredaktor}{Karl Linderhed, Patrik Nyberg och Erik Nybom}
\newcommand{\LIPSversion}{0.2}
\newcommand{\LIPSdatum}{\dagensdatum}

\newcommand{\LIPSgranskare}{}
\newcommand{\LIPSgranskatdatum}{}
\newcommand{\LIPSgodkannare}{}
\newcommand{\LIPSgodkantdatum}{}

\begin{document}

\LIPStitelsida

%% Argument till \LIPSgruppmedlem: namn, roll i gruppen, telefonnummer, epost
\begin{LIPSprojektidentitet}
  \LIPSgruppmedlem{Karl Linderhed}{Projektledare (PL)}{073-679 59 59}{karli315@student.liu.se}
  \LIPSgruppmedlem{Patrik Nyberg}{Dokumentansvarig (DOK)}{073 -049 59 90}{patny205@student.liu.se}
  \LIPSgruppmedlem{Johan Lind}{}{070-897 58 24}{johli887@student.liu.se}
  \LIPSgruppmedlem{Erik Nybom}{}{070-022 47 85}{eriny778@student.liu.se}
  \LIPSgruppmedlem{Andreas Runfalk}{}{070-564 23 79}{andru411@student.liu.se}
  \LIPSgruppmedlem{Philip Nilsson}{}{073-528 48 86}{phini326@student.liu.se}
  \LIPSgruppmedlem{Lucas Nilsson}{}{073-059 42 94}{lucni395@student.liu.se}
\end{LIPSprojektidentitet}


\renewcommand*\contentsname{Innehåll}
\begin{spacing}{0.5}
\tableofcontents{}

\end{spacing}
\newpage

%% Argument till \LIPSversionsinfo: versionsnummer, datum, ändringar, utfört av, granskat av
%\addcontentsline{toc}{section}{Dokumenthistorik}
\begin{LIPSdokumenthistorik}
  \LIPSversionsinfo{0.1}{2014-03-25}{Första utkast för stilgranskning}{KL,PaN,EN}{}
  \LIPSversionsinfo{0.2}{2014-04-15}{Färdigställande inför inlämning}{KL,PaN,EN}{-}
\end{LIPSdokumenthistorik}
\newpage

\renewcommand{\thepage}{\arabic{page}}
\setcounter{page}{1}

\section{Inledning}
Denna skrivuppgift tjänar till att fördjupa projektgruppens kunskaper i några områden som är relevanta för projektet. Projektet består utav att bygga en helt autonom lagerrobot. I denna robot finns flertalet servon, framförallt i armen som kommer plocka upp och lämna av föremål. En del av denna uppgift ägnas därav till en fördjupning inom just servon.

Roboten måste även ha ström för att kunna drivas, detta kommer göras med litiumjonbatterier. Därför är den första delen av denna fördjupning en beskrivning av dessa batterier, hur de fungerar, hur de ska användas på bästa sätt och vilka risker som finns med denna typ av batteri.

\section{Problemformulering}
\label{sec:problem}
Följande frågeställningar ska besvaras i denna uppgift:
\begin{itemize}
\item Hur fungerar litiumjonbatterier?

\item Vilka risker finns vid användning och laddning av litiumjonbatterier?

\item Hur påverkas livstiden hos ett batteri av användning och laddningsmönster?

\item Vilken forskning bedrivs om batterier i nuläget?

\item Hur fungerar ett enkelt servo?

\item Hur kan man få ett servo att röra sig utan kraftiga ryck?

\item Hur styr man servon av typen Dynamixel AX-12A som används i robotarmarna på ISY:s projektkurser?

\end{itemize}

\section{Teori}
För att samla och inhämta information har gruppen använt sig av vetenskapliga publikationer och litteratur som behandlar ämnena. Detta avsnitt sammanfattar den information som har insamlats.

\subsection{Litium-jon-batterier}
Litium-jon-batterier utnyttjar det faktum att litium är ett av de mest elektronegativa ämnena som finns, och när en elektron lämnar en litiumatom frigörs en stor mängd energi. Detta gör att batterier som använder litiums jonövergång kan få väldigt hög energidensitet och prestanda.

Som i alla batterier används två elektriskt isolerade elektroder, omslutna av en elektrolyt som sammankopplar dem kemiskt. Elektrolyten och materialen i elektroderna möjliggör att kemiska jämviktsreaktioner kan äga rum, och vilken riktning reaktionerna går i avgörs av om det finns en extern potentialskillnad mellan elektroderna eller om de är sammankopplade, exempelvis genom någon last, se figur \ref{fig:reaction}. \cite{glaize13}

\nyBild{Reaktionsforlopp.png}{Flöde av ström och joner vid laddning och urladdning}{reaction}{0.8}

De kemiska reaktioner som sker inuti batteriet i uppladdning och urladdning är följande för hela förloppet:

\centerline{\ce{LiMo2 + nC <=>[\text{Laddning}][\text{Urladdning}] Li_{1-x}MO2 + Li_{x}C_{n}}}

För anoden är reaktionen:
\\
\centerline{\ce{nC + xLi^+ + xe <=>[\text{Laddning}][\text{Urladdning}] Li_{x}C_{n}}}

För katoden är reaktionen:
\\
\centerline{\ce{LiMO2 <=>[\text{Laddning}][\text{Urladdning}] Li_{1-x}MO2 + xLi^+ + xe}}

Där n är 6, 12 eller 18. M är Co, Ni, Fe eller W beroende på batteri. Under en laddning eller urladdning kan alltså \ce{LiC6}, \ce{LiC12} eller \ce{LiC18} att bildas eller förbrukas på anoden. \cite{formler} 

Det är dessa kemsiksa reaktioner som ger ström från batteriet, då reaktionen på anoden under urladdning ger ifrån sig en elektron, medans katoden behöver en elektron för att genomföra sin reaktion. Detta kommer då driva en ström genom lasten som läggs på batteriet.

För att dessa reaktioner ska kunna äga rum måste det finns yta på anoden och katoden där de olika ämnena kan reagera med varandra. Om dessa ytor skulle minska kommer också kapaciteten på batteriet att minska. Effekter som kan göra att ytan på andoden och katoden minskar finns beskrivet vidare i \ref{slitage}.

\subsubsection{Laddning}
För laddning av batterier finns det två olika tekniker. En är att hålla en konstant ström till batteriet och den andra att hålla en konstant spänning till batteriet. Eftersom litiumjonbatterier är mycket känsliga mot för hög spänning är det vanligt att en kombination av de båda används.

Då hålls först en konstant ström, sedan när batteriet når 4,2~V per cell hålls istället en konstant spänning. Då mäts strömmen till batteriet och när det når några procent av ursprungliga värdet så anses batteriet vara fullt laddat. Exakt siffra på hur många procent av strömmen batteriet laddas till beror på tillverkare, vanligt är runt 2-5~\%.

\subsubsection{Livstid}
Livstid hos batterier mäts främst i antalet cykler de klarar av innan de når 80~\% av sin ursprungliga kapacitet. En cykel består utav en full laddning och urladdning, detta kan dock ske under flera separata laddningstillfällen. Det sker alltså ingen nämnvärd skillnad i livslängd om ett batteri laddas ofta eller sällan. Detta så länge ett batteri inte lagras mer än 6 månader utan användning.

Vid lagring av batterier kan de över lång tid tappa kapacitet, hur mycket beror på vilken laddning de har. Vid full laddning finns det risk att batteriet tappar mer maximal kapacitet än vid ej full laddning. Eftersom det laddas ur under lagring så kan det vid lagring med nästan tom laddning göra att batteriet går under 2,7~V per cell. Om detta sker går batteriet in ett ''djupt urladdningstillstånd'' och kommer då inte gå att ladda igen. För ett exempel så rekommenderar Apple att om deras produkter ska förvaras längre tid utan användning ska detta ske vid cirka 50~\% laddning. \cite{apple}

\subsubsection{Slitage}
\label{slitage}
Slitage på litiumjonbatterier beror på många olika faktorer. Bland annat spelar temperatur på batteriet roll. Höga temperaturer gör att slitage på batteriet kommer ske med ökande hastighet, men även låga temperaturer påverkar batteriets livslängd negativt. Låga temperaturer har visats ha störst negativ effekt vid uppladdning av batteriet. \cite{ageing}

Laddning av batterier är ett av de moment som sliter på batterier signifikant. En av de effekter som påverkar livstiden mest \cite{charging} och som ger upphov till permanenta skador på batteriet är så kallad “Lithium plating”. Detta sker då det blir en litiummetallbeläggning på anoden.\cite{nasa} Detta är en icke reversibel process och betyder då att batteriet permanent förlora kapacitet. För att minimera denna effekt ska laddning inte ske vid låga temperaturer och med låg ström under de första samt sista 10~\% av laddningen. \cite{charging-p}

Intressant att notera är att den typen av laddningsteknik som används i laddare för hemelektronik idag inte gör på detta sätt.\cite{apple} De laddar istället med konstant ström från början tills dess att 4,2~V finns i varje cell och byter därefter till konstant spänning. Detta görs troligen eftersom dagens batteri trots detta har en livstid på ungefär 1 000~cykler, och tillverkarna har då prioriterat snabbhet över livstid.

Under laddning är det också viktigt att laddaren inte överladdar batteriet. Ett batteri räknas som överladdat då spänningen överstiger 4,2~V per cell. Detta påverkar batteriet negativt på flera olika sätt, säkerhetsaspekten på detta problem beskrivs senare i avsnittet \ref{säkerhet}.

Om ett batteri blir överladdat kommer detta att ge slitage på batteriet. Detta genom att ändra vilka typer av litiumjoner som finns i elektrolyten. För att mäta detta har forskare i rapporten \cite{overcharging-type} användt det faktum att dessa joner har olika storlek. Det ger då olika diffraktionsmönster då batteriet genomstrålas i en neutronkanon. Detta gjorde då att vilken mängd joner av olika typ som finns kunde utskiljas. För ett batteri som inte blivit överladdat finns koncentrationen av olika joner i figur \ref{fig:linormal}.

\nyBild{Linormal.png}{Koncentration av olika typer av joner efter normal uppladdning, tagen från \cite{overcharging-type}}{linormal}{0.8}

Ett batteri som blivit överladdat kommer att ha mindre \ce{LiC6} jämnfört med ett batteri som inte blivit överladdat. Ett överladdade batteriet kommer istället innehålla mer \ce{LiC12} samt \ce{LiC18} \cite{overcharging-type}, se figur \ref{fig:lioverchargd}. Det syns även efter urladdning att mer \ce{LiC12} samt \ce{LiC18} finns i ett överladdade batteriet jämnfört med ett icke överladdat batteri, då det knappt innehåller \ce{LiC_{x}} alls \cite{overcharging-type}. Denna effekt framträdde då ett batteri blivit överladdat till över 4.5~V.

\nyBild{Lioverchargd.png}{Koncentration av olika typer av joner efter överladdning, tagen från \cite{overcharging-type}}{lioverchargd}{0.8}

Som tidigare beskrivet är det den kemiska reaktionen av \ce{LiC_{x}} som ger ström från batteriet. Detta innebär att ett överladdat batteri inte kommer ge ifrån sig all sin laddning, eftersom \ce{LiC12} samt \ce{LiC18} finns kvar även om batteriet är urladdat.

\subsubsection{Säkerhet}
\label{säkerhet}
Li-ion batterier kan av många olika anledningar gå sönder. De vanligaste är felaktigheter i produktion eller att användaren på något sätt utsätter batteriet för allt för stora påfrestningar. Dessa påfrestningar kan vara för hög eller låg temperatur, överladdning, brand, kortslutning eller mekaniska påfrestningar så som tryck. \cite{lihazard}

När ett Li-ion batteri går sönder finns det stor risk att det expanderar, blir varmt och i vissa fall även börjar brinna eller till och med exploderar.

Li-ion batterier kan, av slitage genom litihum plating, internt kortslutas.\cite{nasa} Då detta händer finns det risk för att batteriet blir mycket varmt, expanderar, börjar brinna eller exploderar.

Då ett batteri laddas är det ur säkerhetssynpunkt också viktigt att det inte överladdas. Då detta händer finns det risk för att batteriet internt kortsluts, vilket gör att energi frigörs till värme under kort tid. Experiment som utförts \cite{overcharging} visar att det krävs laddning till cirka 5.3~V innan ett batteri kommer explodera. De batterier som testades hade då en yttre temperatur på mellan 105 och 112~grader.

Då ett batteri utsätts för öppen låga har forskning gjord av FAA (Federal Aviation Administration) \cite{fire-faa} visat att batterier från olika tillverkare beter sig i stort sätt likadant. Deras experiment visar att de först ventilerar en del av elektrolyten i batteriet. Denna vätska antänds sedan och bildar då en egen brandhärd. Vidare säger de att ''Occasionally, the pressure release ports failed to operate correctly, causing buildup of pressure inside the cell case until the casing failed. When this occurred, the cell literally exploded …''

Dessa experiment utförda av FAA visade också hur snabbt brandförloppet är. Efter 45~sekunder började batterierna att ventilera elektrolyt och 65~sekunder in i förloppet antändes även vätskan. I denna studie fastslogs även att lågan som litiumjonbatterier ger upphov till är tillräckligt varm för att antända annat vanligt packmaterial som ofta finns i lastrum.\cite{fire-faa}

På grund utav detta är batterier av litiumjon typ klassade som farligt gods då de transporteras i större mängd. Det finns också ytterligare risk då de transporteras via flygplan. Detta då en brand i llitiumjonbatterier kan göra att trycket ökar. Detta gör i sådant fall att med så få som 4 battericeller kan trycket i lastrummet öka så mycket att lastrummet måste öppna ventiler för att hålla tryckskillnaden inom säkra nivåer. Detta kommer i sin tur att göra det svårare för det automatiska brandförsvarssystem som finns installerat.\cite{fire-faa}

Ett uppmärksammat fall med li-ion batterier och säkerhet är Boeings plan~787~“Dreamliner”. Där fanns det ett problem med li-ion batterier i cockpit som orsakade rökutveckling under flera flygningar. I detta fall har man inte kunnat identifierat problemet som gör att batterierna började brinna. Detta trots omfattande tester och 25 000~timmars tester av batterierna innan lansering av planet. Problemet löstes sedemera genom en ny batteridesign samt en brandsäker annordning som också kunde avvärja rök från cockpit.\cite{dreamliner}

\subsection{Aktuell forskning kring litium-jon-batterier}
Att förbättra dagens batteriteknik är ett aktivt forskningsområde som engagerar många akademiker och forskningscentra i världen. Även om dagens litium-jon-batterier är världsledande på marknaden när det handlar om energitäthet idag så börjar de närma sig sin maxgräns vad gäller kapacitet per vikt, och för att möta dagens behov av renare energialternativ och energiförvaring krävs radikala förbättringar i batteritekniken. \cite{better-battery} 

Man kan tänka sig tre huvudsätt att angripa problemet att bygga vidare på och förbättra dagens litium-jon-batterier. Antingen kan man arbeta med att utveckla den teknik som finns idag med litium som laddningsbärande ämne, eller så kan man forska på att utveckla andra typer av kemiska batterier som använder andra ämnen, och slutligen kan man leta efter helt andra sätt att lagra energi på som inte använder kemiska reaktioner. I det här avsnittet behandlas ett urval av den forskning som bedrivs på dessa tre områden idag.

\subsubsection{Att förbättra litium-jon-batterier}
Ett sätt att öka energitätheten och sänka kostnaderna för batterier som fortfarande använder litium som laddningsbärare är att modifiera batteridesignen till att använda alternativa elektrodmaterial och elektrolyter. Ett exempel på detta är en typ av litium-svavel-batterier som byter ut elektroderna mot en av rent litium och en av en blandning av svavel, grafenoxid och cetrimoniumbromid (förkortat CTAB, en ingrediens i vissa bakteriedödande medel).\cite{li-s}

I en artikel i American Chemical Societys tidsskrift \emph{Nano Letters} beskrivs hur forskare med denna design nyligen har lyckats uppnå väldigt hög prestanda. De har lyckats framställa batterier som inte bara är lättare än konventionella litium-jon-batterier, utan också har en livslängd på över 1500 cykler och som kan urladdas med 6C (C motsvarar strömmen som laddar upp eller ur batteriets kapacitet på en timme, exempelvis kan ett batteri på 1000 mAh som listats som 6C ge 6 A). \cite{li-s}

\subsubsection{Andra typer av kemiska batterier}
Litium har fördelen som laddningsbärare i batterier att det är väldigt reaktivt och den lättaste metallen som finns. Dock bär varje litiumjon endast på en laddning och om ett batteri använde ett annat ämne som låter sig joniseras lika lätt men som bär på fler laddningar skulle man kunna öka prestandan per viktenhet substantiellt. Ett koncept som forskare jobbar på är att ersätta litium med magnesium, vars joner bär på två laddningar. Problemet som finns idag är dock att magnesium dras mycket starkare till syreatomer i de organiska elektrolyter som används, och har därför inte så hög urladdningshastighet som man skulle önska. Detta skulle kunna åtgärdas med nya kombinationer av elektrolyter och elektrodmaterial, och forskare jobbar därför mycket med datorsimuleringar för att hitta en optimal design. \cite{better-battery}

Ett radikalt annorlunda angreppssätt är att bygga batterier som använder den omkringliggande luften som en del i de kemiska reaktionerna. De kallas \emph{air-breathing batteries}, Li-O, och använder syre från luften som får flöda genom en porös kolelektrod. Detta ger mer utrymme i batterierna och mindre vikt eftersom det bara behövs en metallelektrod av litium. Man har dock haft stora problem med att undvika oönskade sidoreaktioner inuti batterierna som degraderar prestandan, vissa batterier har haft livslängder på under 50 cykler. Enligt artikeln \emph{A better battery} i tidsskriften Nature har många forskare gett upp tanken på Li-O som batteriteknik. \cite{better-battery}

Det finns dock forskningsrön som tyder på att den billigare varianten Na-O, som använder natrium istället för litium, är betydligt bättre i många avseenden och har markant mindre inverkan från sidoreaktioner. Det återstår att se hur forskningen kring detta kommer att utvecklas i framtiden. \cite{better-battery}

\subsubsection{Andra tekniker för att lagra energi}
En kondensator kan på många sätt fungera som ett batteri. Den kan laddas upp och laddas ur och behåller sin laddning när den inte belastas. Den stora skillnaden mot batterier är att energin inte lagras kemiskt i molekylbindningar, utan elektriskt i ett elektriskt fält. Detta gör att kondensatorer kan laddas upp och laddas ur väldigt snabbt och är därför attraktiva för användning i tillämpningar som kräver snabb laddning och hög strömstyrka. Kondensatorer som har kapaciteter som närmar sig de hos dagens batterier kallas super- eller ultrakondensatorer. En användning av superkondensatorer idag är i moderna hybridfordon och bussar där energi från inbromsningar lagras och används när extra effekt behövs.\cite{capacitors}


\subsection{Servon}
 
En servomotor (här förkortat servo) är en slags motor vars funktion är att kunna anta fördefinierade  vinklar och hålla denna vinkel tills ett ny vinkel anges. De används alltså inte för att driva hjulen på en bil eller propellern på ett flygplan. Servon används istället framförallt i robotar, automatiserade system  och fjärrstyrda enheter där till exempel ett flygplans roder ska anta ett visst läge eller en robotarm skall plocka upp ett provrör. Servon är väl lämpade för när man kräver en motor som kan vara stilla och ändå hålla kvar sin last utan att bli överhettade. 
 
Ett servo består av tre delar: en servomotor som kan vara antingen en AC-motor, DC-motor, eller en stegmotor, en positionssensor som mäter servomotorns position samt en kontrollenhet som styr motorn.  Kontrollenheten jämför ständigt skillnaden mellan det önskade vinkelutslaget och den vinkel positionssensor mäter upp och styr sedan servomotorn för att minimera denna skillnad. Detta kallas för att systemet är återkopplat. Den stora fördelen med ett servo är just att den är återkopplad då återkopplingen gör att servot kan hantera olika tunga laster och yttre påverkningar utan att ställa sig fel, vilket lätt händer med öppna system. 
 
Ett servo styrs oftast  med hjälp av en elektrisk styrsignal vars pulsbredd som skickas till den med jämna mellanrum avgör vinkel vinkel servot skall ställa in sig på. Ett klassiskt hobbyservo, vars vinkelomfång vanligtvis är 180 grader, ställer in sig på 0 grader om man skickar en puls som är 0,5 ms lång och det ställer in sig på 180 grader om man skickar en puls som är 2,5 ms lång. En 1,5 ms lång puls gör således att servot ställer in sig i mitten mellan båda ändlägena. Pulser däremellan ger en vinkel på motsvarande sätt. Pulsen bör skickas var 20:e ms fram tills dess att servot har ställt in sig på rätt läge, vilket kan ta upp till en halv sekund om servot skall gå från 0 grader till 180 grader. \cite{hobbyservo} Detta kallas för att servot styrs med PWM (Pulse width modulation). Pulsen kan till exempel skickas från en mikrokontroller eller en mikroprocessor, till exempel ATmels AVR-processorer som används av studenterna på ISY:s projektkurser.
 
På enklare PWM-styrda servomotorer är det ej möjligt att kontrollera acceleration och deacceleration vid rörelser om man inte faktiskt styr strömmen som går till servomotorn när den startar och när den närmar sig slutmålet. Det är dock omständigt att göra utan att upprepat mäta servots position vilket kräver vinkelhastighetssensorer och dessutom komponenter för att styra strömmen. Det krävs även att man kan styra strömmen till servomotorn utan att ändra strömmen till kontrollenheten och positionssensor vilket är svårt eftersom dessa komponenter vanliga är inbyggda i servot. Däremot är det vanligt att en servomotor har inbyggd så kallad PID-regulator, vilket gör så att motorn går snabbt när det är långt till den önskade positionen och saktar ner ju närmare målet den kommer, så att hastig acceleration och deacceleration undviks. Detta vill man undvika eftersom systemet lätt blir hackigt och det kan bli väldigt stora belastningar på systemet. 
 
En PID-regulator är en regulator som ofta används i återkopplade system framförallt eftersom den saktar ner utsignalen när systemet närmar sig målet samtidigt som den är enkel att implementera. Regulatorn fungerar som så att den, utifrån referenssignalen (det önskade vinkelutslaget) och signalen från positionssensorn beräknar tre parametrar som vägs ihop till en styrsignal. Dessa parametrar är en proportionell parameter, en integrerande parameter samt en deriverande parameter, därav namnet ”PID-regulator”. 
 
 
\subsubsection{Hur styr man ett servo?}
 
Servomotorer styrs som ovan nämnt genom återkoppling, där det önskade värdet ständigt  jämförs med det av positionssensor uppmätta värdet. Skillnaden mellan dessa värden förstärks, omvandlas och används för att driva motorn i den riktning som gör att felet minskas. Den önskade vinkeln anges med så kallad PWM och innebär att man skickar en elektrisk puls vars varaktighet bestämmer läget på motorn. Denna puls upprepas med en given frekvens. Ifall man slutar skicka en puls kommer servot att stå kvar i den position den är i, så länge den inte rubbas av en utomstående kraft. Oftast vill man inte att servot ska kunna rubbas och därför fortsätter man att skicka samma puls tills dess att man vill att servots position ska ändras. 
 
Men det finns även mer avancerade servon som har en egen liten inbyggd dator i sig. På dessa servon kan man ändra diverse egenskaper efter vad den ska användas till. Man kan till exempel ställa in gränser för hur varm motorn får bilden får bli, hur snabbt den får gå, vilket vridmoment den får ha och hur hårt den ska deaccelererars innan den når det önskade värdet. Dessa servon är dock inte PWM-styrda utan styrs seriellt genom att man skickar data till dem som ändrar på vald parameter hos servona till ett visst värde. 
 
Om man vill styra flera servon samtidigt, till exempel ifall man vill styra en robotarm med flera rörliga leder, har man stor fördel av att använda de lite mer avancerade servon som kommunicerar seriellt med halv duplex. Dessa servon kan nämligen parallellkopplas och de styrs individuellt genom att varje servo tilldelas ett unikt identifikationsnummer. När man vill styra ett servo skickar man således ett meddelande till alla servon men endast det servo vars ID stämmer överens med ID:t angivet i meddelandet svarar. Man kan även skicka ett meddelande till flera ID:n samtidigt och dessutom med olika värden till var och ett av servona. 
 
Dessa servon kan man dessutom programmera och ändra på många parametrar för att ändra till exempel hastighet, max vridmoment, inbromsning, max temperatur, begränsa vinkelomfånget och så vidare. \cite{dyn-manual}
 
Ett alternativ till ett servo kan vara en så kallad stegmotor utan återkoppling. Stegmotorn är även den PWM-styrd men vars rörelse är uppdelad i ett givet antal steg, och styrs genom att den hoppar ett visst antal steg för att ställa in sig på den önskade positionen. En vanlig stegmotor är betydligt enklare och billigare än en servomotor eftersom den har öppen styrning, det vill säga att den helt saknar positionssensorn och återkopplingen. Stegmotorn kan alltså ej ta hänsyn till ifall den skulle råka skippa ett steg eller att man tvinga den till fel läge eller andra störningar. Dess position blir därför inte lika pålitlig. Den saknar också möjligheten till mjuk acceleration och deceleration. Däremot är de ofta hållbara och enkla att använda. Om man återkopplar en stegmotor får man ett servo med mycket bra egenskaper jämfört med en konventionell AC-servomotor.  Särskilt i system med hög vilofriktion är skillnaden påtaglig eftersom AC-servona då ofta åker förbi målet för att sedan snabbt korrigeras tillbaka, eller eventuellt åker väldigt långsamt för att undvika just denna ”översläng”. Stegservona är betydligt mer pricksäkra i sådana system. \cite{sigbi}
 
\subsubsection{Dynamixel AX-12A}
 
Dynamixel~AX-12A är de servon som används i robotarmarna på ISY. Dynamixel~AX-12A servona styrs med halv duplex. Halv duplex innebär att det endast finns en signal för att skicka och ta emot data på. Det betyder att endast en enhet kan skicka data i taget annars krockar signalerna och datan blir korrupt. Det finns inget inbyggt stöd för halv duplex på de flesta mikroprocessorer men man kan använda mikroprocessorernas UART funktion som använder två kanaler, en för att sända och en för att ta emot data, och sedan koppla ihop dessa enligt kopplingsschemat nedan. Då styr man sedan vilken kanal på mikroprocessorn som är ansluten till servonas kanal med hjälp av en tredje signal, en styrsignal,  som sätts till låg när man vill ta emot data och hög när man vill skicka data. 
 
\nyBild{Kopplingschema-UART-till-halv-duplex.png}{Kopplingschema för att koppla ihop en AVR med Dynamixel AX-12A. Bilder tagna från \cite{dyn-manual} och \cite{ATmega1284P}} {ax12-koppling}{0.8} 

Ett exempel på hur koppling från en ATmega 1284P:s UART till servonas halv duplex kan se ut syns ovan i figur \ref{fig:ax12-koppling}. PD0 kan på ATmega1284P konfigureras som en mottagningspin i UART och PD1 kan konfigureras som sändningspin. Från PD2 går styrsignalen, men den kan egentligen sitta på i princip vilken pin som helst. SN74LS241 är en liten IC-krets med 8 tristate buffers i (i princip elektriska strömbrytare) där fyra av dem sluts när en styrsignal är plus och fyra av dem när en styrsignal är negativ. Om man kopplar ihop de två styrsignalerna och väljer en av varje grupp kan men hjälp av styrsignalen växla mellan dem.\cite{dyn-manual}
 
Kommunikationen mellan servona och mikroprocessorn sker med två olika typer av datapaket. De kallas instruktionspaket och statuspaket. Instruktionspaket skickas från mikroprocessorerna och innehåller instruktioner till servona som till exempel kan vara att de ska anta en viss position eller att de ska röra sig med en viss hastighet. Statuspaket skickas från servo till mikroprocessor och innehåller data om att servot har tagit emot instruktionen och eventuellt aktuell position eller liknande, beroende på vad instruktionen var. Instruktionspaketet skickas från sändningsporten på mikroprocessorn samtidigt som riktningsporten är satt i ''sändläge'', i detta fall en etta. När servot tar emot ett meddelande svarar denna med ett statuspaket som tas emot av mikroprocessorn på mottagningsporten samtidigt som riktningsporten är i ''mottagningsläge'', i detta fall en nolla. 

Dynamixel~AX-12A:s egenskaper så som position, rörelsehastighet, vridmoment och ID kontrolleras av parametrar i ett kontrollregister som finns hos respektive servo. Med ett instruktionspaket kan man antingen avläsa vad som står i dessa register eller ändra på parametrarna i registret och därmed få servot att röra på sig. Ett instruktionspaket måste se ut på ett visst sätt för att servot ska kunna tolka det. I grova drag ser ett instruktionspaket ut så här:\\

[Startbytes] [ID] [Längd] [Instruktion] [Parametrar] [Kontrollsiffra]\\

Servot svarar sedan med ett statuspaket som ser ut enligt:\\

[Startbytes] [ID] [Längd] [Felkod] [Parametrar] [Kontrollsiffra]\\

I börjar av alla meddelanden skickas två startbytes för att tala om alla enheter att nu kommer det ett meddelande. Varje startbyte är alltid 0xFF, det vill säga åtta stycken 1:or och totalt skickas alltså 16 stycket 1:or innan meddelandet börjar. Efter startbytesen skickas i ett instruktionspaket ett ID till den enhet meddelandet är avsett för. I statuspaketen skickar servona med sitt eget ID, för att tala om vem det är som svarar. Ifall ett instruktionspaket ska skickas till flera enheter samtidigt anges ID-byten med 0xFE som gör att alla enheter lyssnar. 

Efter ID-byten skickas längden på meddelandet, så att enheterna vet hur många parametrar den ska lyssna efter. Längden beräknas genom att summera antalet parametrar och addera med 2.

Efter längden anges den instruktion man vill att servot ska utföra. Det finns i huvudsak fyra användbara instruktioner för att kommunicera med ett servo. De är ping, vilken används för att ta emot ett servos statuspaket, läs data, vilken används för att läsa av en av parametrarna i kontrollregistret, skriv data, som skriver data till en av parametrarna i kontrollregistret samt resest, som återställer servots parametrar till fabriksinställningarna. Det finns utöver dessa även en instruktion för att skriva till samma parameter på olika servos kontrollregister i ett och samma instruktionspaket. 

För statuspaket gäller inte instruktionsbyten utan istället skickas en felkod, som talar om ifall någonting har gått snett.

Den första parametern som följer efter instruktionen indikerar vilken plats i registret som skall behandlas. Om instruktionen var att skriva till ett register är nästa parameter vilket värde som skall skrivas till registret. 

Till sist följer en kontrollbyte vars värde räknas ut genom att summera värdet på byte ID, längd, instruktion och parametrar. Denna summa inverteras sedan binärt (ettor och nollor byter plats) och bildar då kontrollsiffran.

Totalt finns det 26 olika parametrar som kan skrivas och avläsas och ytterligare 10 parametrar som endast kan avläsas. \cite{dyn-manual}
 
\section{Resultat och slutsatser}
Gruppen har strävat efter att besvara de frågeställningar som ställdes i avsnitt \ref{sec:problem}. Här följer sammanfattningar av vad man kommit fram till och även diskussion av resultaten i förekommande fall.

\subsection{Hur fungerar litium-jon-batterier?}
Ett litium-jon-batteri består av två elektroder av olika ämnen som omsluts av ett elektrolyt så att litiumjoner kan vandra genom elektrolyten och driva en ström genom batteriet. Elektroderna kan vara av många olika typer, men vanligt är att man använder litiummanganoxid och grafit, och ett elektrolyt av litiumsalt upplöst i ett organiskt lösningsmedel.\cite{litium-in-cars}

\subsection{Vilka risker finns vid användning och laddning av litium-jon-batterier?}
Litiumjonbatterier kan anses vara säkra för vardaglig användning, även om de ska hanteras med försiktighet. De största farorna är under transport då många batterier fraktas samtidigt, då det vid en brand kan bli ett mycket våldsamt och snabbt brandförlopp då batteriena utsätts för öppen låga. Detta är, som tidigare diskuterat, speciellt viktigt vid flygtransporter då batterierna också ger en tryckökning vilket gör det svårare för de automatiska släcksystem som finns installerade.

När ett litiumjonbatteri används finns det också risker, framförallt då ett batteri kan börja brinna. Eftersom detta kan ske trots att batteriet inte vanvårdats är det viktigt att vara uppmärksam på temperaturökningar på batteriet. Som tidigare beskrivet når yttre temperaturen på batteriet över 100~grader innan skalet brister, vilket betyder att temperaturökningen är klart märkbar. Om detta sker ska användning av batteriet omedelbart upphöra.

\subsection{Hur påverkas livstiden hos ett batteri av användning och laddningsmönster}
Laddning och användning av ett litiumjonbatteri ska inte ske vid låga temperaturer, då detta ger permanenta skador på batteriet som påverkar kapaciteten negativt. För att minimera slitage ska också laddning ske med låg ström under de första samt sista 10~\% laddningen. Det ska också ske med en laddare som har funktion för att se till att batteriet inte blir överladdat. Detta då en överladdning, som tidigare beskrivet, påverkar maximala kapaciteten negativt.

\subsection{Vilken forskning bedrivs om batterier i nuläget?}
Forskningen inriktas på en rad olika områden, då det finns många olika metoder för att förbättra batteritekniken. Gruppen har funnit följande exempel på forskning som bedrivs i nuläget:
\begin{itemize}
\item Nya material i litiumbatterier, såsom litium-svavel-batterier och litium-syre/litium-luft-batterier.
\item Andra laddningsbärande ämnen än litium, såsom magnesiumbatterier och natrium-luft-batterier.
\item Andra lagringstekniker än kemiska batterier, såsom superkondensatorer.
\end{itemize}
Alla dessa forskningsansträngningar strävar efter att ta fram alternativ till konventionella litium-jon-batterier som är mer energieffektiva och billigare. Alla har de fördelar och nackdelar, men det alternativet som gruppen bedömer vara mest lovande för att ersätta litium-jon-batterier i fordon är att använda litium-svavel-batterier. Superkondensatorer är också mycket intressanta och används redan i fordon för att ge en extra tillförsel av energi under korta tidsperioder, gruppen tror dock inte att de är tillräckligt energitäta i nuläget för att kunna få plats i en elbil och samtidigt ha tillräckligt med kapacitet för att konkurrera med dagens litium-jon-batterier som huvudlagring av energi. 

\subsection{Hur fungerar ett enkelt servo?}
Ett servo består av en motor, en positionssensor och en kontrollenhet som reglerar motorns position. Tack vare positionssensorn och kontrollenheten har ett servo inbyggd återkoppling så att det alltid jämför sin egen position med den position som det ska anta. Detta gör att även ifall man tvingar servot till fel position kommer den alltid att ställa sig rätt igen när man släpper. Även om man ändrar dess position när strömmen är av kommer den alltid hiita till den position som anges när strömmen slås på igen. En vanlig stegmotor eller liknande har ej denna egenskap, eftersom den inte kan jämföra sin egen position med verkligheten.

\subsection{Hur kan man få ett servo att röra sig utan kraftiga ryck?}
Att få ett servo att röra sig utan ryck är både enklare och svårare än vad man kan tro. Det är enklare eftersom i princip alla servon redan har någon form av denna funktion inbyggd. Däremot går det inte att i efterhand ändra på dess egenskaper på de vanliga servona utan detta går endast på de lite mer avancerade servon som till exempel Dynamixel AX-12A. På Dynamixel AX-12A kan både hastighet och i vilken grad servot skall bromsas in ändras genom att ändra korrekt värde på servots kontrollregister. 

\subsection{Hur styr man servon av typen Dynamixel AX-12A som används i robotarmarna på ISY:s projektkurser?}
Dynamixel AX-12A är inte PWM-styrda som många andra servor är. Dynamixel AX-12A har istället en egen dator inbyggd och servot styrs efter vilka värden som finns i dess kontrollregister. Man kommunicerar med Dynamixel AX-12A seriellt via halv duplex för att ändra värdena i kontrollregistret. En mikroprocessor kan användas för kommunikationen till Dynamixel AX-12A men då behöver styrsignalen omvandlas från mikroprocessorns UART till servots halv duplex, i de fall mikroprocessorerna saknar inbyggt stöd för halv duplex kommunikation.
\newpage

\begin{thebibliography}{9}
\addcontentsline{toc}{section}{Referenser}
\bibitem{glaize13} C. Glaize, S. Geniès, 2013, \emph{Lithium Batteries and other Electrochemical Storage Systems}\\ Wiley-ISTE, 2013

\bibitem{apple} Apple Inc, 2014, \emph{Apple Notebooks battery}
\\ http://www.apple.com/batteries/notebooks.html, hämtad 2014-03-20

\bibitem{ageing} J. Vetter, P. Novák, M.R. Wagner, K.-C. Möller, J.O. Besenhard, M. Winter, M. Wohlfahrt-Mehrens, C. Vogler, A. Hammouche, 2005, \emph{Ageing mechanisms in lithium-ion batteries}
\\ Journal of Power Sources, volym 147, utgåva 1-2, september 2005, sidor 269-281

\bibitem{charging} S.S. Zhang, K. Xu, T.R. Jow, 2006, \emph{Study of the charging process of a LiCoO$_{2}$-based Li-ion battery}
\\ Journal of Power Sources, volym 160, utgåva 2, oktober 2006, sidor 1349-1354

\bibitem{charging-p} S.S. Zhang, 2006, \emph{The effect of the charging protocol on the cycle life of a Li-ion battery}
\\ Journal of Power Sources, volym 161, utgåva 2, oktober 2006, sidor 1385-1391

\bibitem{fire-faa} H. Webster, 2006, \emph{Flammability Assessment of Bulk-Packed, Rechargeable Lithium-Ion Cells in Transport Category Aircraft}
\\DOT/FAA/AR-06/38, september 2006, Final Report

\bibitem{dreamliner} N. Williard, W. He, C. Hendricks, M. Pecht, 2013, \emph{Lessons Learned from the 787 Dreamliner Issue on Lithium-Ion Battery Reliability}
\\Energies, september 2013

\bibitem{lihazard} C. Mikolajczak, M. Kahn, K. White, R. Thomas, 2011, \emph{Lithium-Ion Batteries Hazard and Use Assessment}
\\Springer, 2011

\bibitem{nasa} A. Zimmerman, M. Quinzio, \emph{Lithium Plating in Lithium-Ion Cells}
\\The Aerospace Corporation, 2010
\\https://batteryworkshop.msfc.nasa.gov/presentations/1-Lithium\_Plating\_AZimmerman.pdf, hämtad 2014-03-20 

\bibitem{dyn-manual} Robotis, 2006, \emph{User's Manual Dynamixel AX-12}
 \\ https://docs.isy.liu.se/twiki/pub/VanHeden/DataSheets/AX-12.pdf, hämtad 2014-03-20

\bibitem{hobbyservo} Vanheden 2003, \emph{Servostyrning}
\\https://docs.isy.liu.se/twiki/pub/VanHeden/DataSheets/servostyrning.pdf, hämtad 2014-03-19

\bibitem{ATmega1284P} Atmel Corporation, 2009, \emph{ATmega 1284P Data sheet}
\\https://docs.isy.liu.se/twiki/pub/VanHeden/DataSheets/atmega1284p.pdf, hämtad 2014-03-20

\bibitem{ana-servo} Anaheim Automation Inc., 2011, \emph{Servo motor guide}
\\ http://www.anaheimautomation.com/manuals/forms/servo-motor-guide.php, hämtad 2014-03-20

\bibitem{sigbi} SiGBi System AB, Inc, \emph{Servomotor - Ezi-SERVO BTe}\\
http://www.sigbi.se/system/Produkter/Servomotor/Ezi-SERVO/Ezi-SERVO-BT, hämtad 2014-04-11

\bibitem{overcharging-type} N. Sharma, V. Peterson, 2013, \emph{Overcharging a lithium-ion battery: Effect on the Li$_{x}$C$_{6}$ negative electrode determined by in situ neutron diffraction}
\\ Journal of Power Sources, volym 244, december 2013 , sidor 695-701

\bibitem{overcharging} R. A. Leising, M. J. Palazzo, E. Sans Takeuchi, K. J. Takeuchi, 2001, \emph{A study of the overcharge reaction of lithium-ion batteries}
\\ Journal of Power Sources, volym 97-98, juli 2001, sidor 681-683

\bibitem{formler} Q. Wang, P. Ping, X. Zhao, G. Chu, J. Sun, C. Chen, 2012, \emph{Thermal runaway caused fire and explosion of lithium ion battery}
\\ Journal of Power Sources, volym 208, juni 2012, sidor 210-224

\bibitem{better-battery} R. Van Noorden, 2014, \emph{The rechargeable revolution: A better battery} \\ Nature, volym 507, mars 2014, sidor 26-28

\bibitem{li-s} M. Song, Y. Zhang, E. J. Cairns, 2013, \emph{A Long-Life, High-Rate Lithium/Sulfur Cell: A Multifaceted Approach to Enhancing Cell Performance} \\ Nano Lett., 13, 2013, sidor 5891-5899

\bibitem{capacitors} A. Yu, V. Chabot, J. Zhang, 2013, \emph{Electrochemical supercapacitors for energy storage and delivery} \\ Taylor \& Francis, 2013

\bibitem{litium-in-cars} J. Voelcker, 2007, \emph{Lithium Batteries Take to the Road} \\
http://spectrum.ieee.org/green-tech/advanced-cars/lithium-batteries-take-to-the-road, hämtad 2014-04-15

\end{thebibliography}
\end{document} 
